import{j as s,N,r as l,u as E,C as T}from"./index-A7T3n_50.js";import{E as V,a as J}from"./index-CUtrzsQ-.js";const y="_sectionContainer_15i93_1",A="_sectionTitulo_15i93_21",S="_sectionContenido_15i93_39",L="_contenidoAdicional_15i93_53",$="_pagination_15i93_69",H="_activePage_15i93_115",M="_sectionTabla_15i93_123",O="_cardContainer_15i93_137",R="_buttonVacante_15i93_153",z="_detallesVacante_15i93_211",D="_botonPostular_15i93_271",W="_cardColumn_15i93_339",F="_active_15i93_115",I="_detalleColumn_15i93_477",U="_sectionTablaVacantes_15i93_657",e={sectionContainer:y,sectionTitulo:A,sectionContenido:S,contenidoAdicional:L,pagination:$,activePage:H,sectionTabla:M,cardContainer:O,buttonVacante:R,detallesVacante:z,botonPostular:D,cardColumn:W,active:F,detalleColumn:I,sectionTablaVacantes:U},u=({totalPages:t,currentPage:c,onPageChange:n})=>t===0?null:s.jsxs("div",{className:e.pagination,children:[s.jsx("button",{onClick:()=>n(c-1),disabled:c===1,children:"<"}),Array.from({length:t}).map((a,d)=>{const x=d+1;return s.jsx("button",{onClick:()=>n(x),className:x===c?e.activePage:"",children:x},x)}),s.jsx("button",{onClick:()=>n(c+1),disabled:c===t,children:">"})]}),q=({jobs:t,activeJob:c,onJobClick:n})=>t.length===0?s.jsx("div",{className:e.placeholder,children:s.jsx("p",{className:"light-text",children:"No hay vacantes disponibles"})}):s.jsx("div",{className:e.cardColumn,children:t.map(a=>s.jsx("div",{className:`${e.cardContainer} ${c===a.id?e.active:""}`,children:s.jsxs(N,{onClick:()=>n(a.id),className:e.buttonVacante,title:`Ver detalles de ${a.fields.title}`,children:[s.jsx("h3",{className:"bold-text",children:a.fields.title}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Tipo:"})," ",a.fields.type]}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Tiempo:"})," ",a.fields.time]}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Horario:"})," ",a.fields.work_days]})]})},a.id))}),P=({job:t})=>t?s.jsxs("div",{className:`${e.detallesVacante} fade-in`,"aria-live":"polite",children:[s.jsx("h3",{className:"bold-text",children:t.fields.title}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"DescripciÃ³n:"})," ",s.jsx("br",{})," ",t.fields.description]}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Habilidades:"})," ",s.jsx("br",{})," ",t.fields.skills]}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Responsabilidades:"})," ",s.jsx("br",{})," ",t.fields.responsibilities]}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Oferta:"})," ",s.jsx("br",{})," ",t.fields.offer]}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Tipo:"})," ",s.jsx("br",{})," ",t.fields.type]}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Tiempo:"})," ",s.jsx("br",{})," ",t.fields.time]}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Horario:"})," ",s.jsx("br",{})," ",t.fields.work_days," ",s.jsx("br",{})," ",t.fields.work_time]}),s.jsx(N,{to:`/postular/${t.id}`,"aria-label":"Postular a la vacante",className:e.botonPostular,children:s.jsx("button",{className:"boton-1 bold-text",children:"POSTULAR"})})]},t.id):s.jsx("div",{className:e.placeholder,children:s.jsx("p",{className:"light-text",children:"Selecciona una vacante para ver los detalles"})}),B=()=>{const[t,c]=l.useState([]),[n,a]=l.useState(!0),[d,x]=l.useState(null),[p,f]=l.useState(null),[g,k]=l.useState(window.innerWidth<768),m=4,[o,h]=l.useState(1),{id:_}=E();l.useEffect(()=>{const i=()=>k(window.innerWidth<768);return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),l.useEffect(()=>{(async()=>{try{const r=await J.get("http://localhost:5000/api/jobs");c(r.data.records||r.data)}catch(r){x(r.message||"Error al obtener las vacantes")}finally{a(!1)}})()},[]),l.useEffect(()=>{const i=Math.ceil(t.length/m);i===0?h(1):o>i&&h(i)},[t,o]),l.useEffect(()=>{g||f(null)},[o,g]),l.useEffect(()=>{_&&f(_)},[_]);const b=i=>{f(r=>r===i?null:i)},j=Math.ceil(t.length/m),C=o*m,w=C-m,v=t.slice(w,C);if(!g){const i=t.find(r=>r.id===p);return s.jsxs("section",{className:e.sectionContainer,children:[s.jsx("header",{className:e.sectionTitulo,children:s.jsx("h1",{className:"bold-text",children:"Vacantes disponibles"})}),s.jsxs("section",{className:e.sectionContenido,children:[n&&s.jsx("div",{className:e.contenidoAdicional,children:s.jsx(T,{})}),!n&&d&&s.jsx("div",{className:e.contenidoAdicional,children:s.jsx(V,{})}),!n&&!d&&s.jsxs("section",{className:e.sectionTablaVacantes,children:[s.jsx(u,{totalPages:j,currentPage:o,onPageChange:h}),s.jsxs("section",{className:e.sectionTabla,children:[s.jsx(q,{jobs:v,activeJob:p,onJobClick:b}),s.jsx("div",{className:e.detalleColumn,children:s.jsx(P,{job:i})})]}),s.jsx(u,{totalPages:j,currentPage:o,onPageChange:h})]})]})]})}return s.jsxs("section",{className:e.sectionContainer,children:[s.jsx("header",{className:e.sectionTitulo,children:s.jsx("h1",{className:"bold-text",children:"Vacantes disponibles"})}),s.jsxs("section",{className:e.sectionContenido,children:[n&&s.jsx("div",{className:e.contenidoAdicional,children:s.jsx(T,{})}),!n&&d&&s.jsx("div",{className:e.contenidoAdicional,children:s.jsx(V,{})}),!n&&!d&&s.jsxs("section",{className:e.sectionTabla,children:[s.jsx(u,{totalPages:j,currentPage:o,onPageChange:h}),v.map(i=>s.jsxs("div",{className:e.cardContainer,children:[s.jsxs(N,{onClick:()=>b(i.id),className:e.buttonVacante,title:`Ver detalles de ${i.fields.title}`,children:[s.jsx("h3",{className:"bold-text",children:i.fields.title}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Tipo:"})," ",i.fields.type]}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Tiempo:"})," ",i.fields.time]}),s.jsxs("p",{className:"light-text",children:[s.jsx("strong",{children:"Horario:"})," ",i.fields.work_days]})]}),p===i.id&&s.jsx(P,{job:i})]},i.id)),s.jsx(u,{totalPages:j,currentPage:o,onPageChange:h})]})]})]})},Q=()=>s.jsx("main",{children:s.jsx("section",{children:s.jsx(B,{})})});export{Q as default};
